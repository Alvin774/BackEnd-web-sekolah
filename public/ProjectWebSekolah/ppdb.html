

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <!-- link icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <!-- link googel font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton+SC&family=Archivo:ital,wght@0,100..900;1,100..900&family=Fira+Sans+Extra+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Montserrat+Underline:ital,wght@0,100..900;1,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Pacifico&family=Playfair:ital,opsz,wght@0,5..1200,300..900;1,5..1200,300..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quattrocento:wght@400;700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />

    <!-- link Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- link home.css -->
    <link rel="stylesheet" href="css/ppdb.css" />
  </head>
  <body>
    <!-- navigasi 2 start -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand text-white" href="#">
          <img
            src="img/YEKA-removebg-preview.png"
            alt="Logo"
            width=""
            height="60"
            class="d-inline-block align-text-center mb-2"
          />
        </a>
        <button
          class="navbar-toggler custom-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Profile
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" href="sambutan.html"
                    >Sambutan Kepala Sekolah</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="data-sekolah.html"
                    >Data Sekolah</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="sejarah.html">Sejarah</a>
                </li>
                <li>
                  <a class="dropdown-item" href="visi-misi-tujuan.html"
                    >Visi Dan Misi</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="#">Struktur Organisasi</a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="guru.html">Guru</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="fasilitas.html">Fasilitas</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ekstrakurikuler.html"
                >Ekstrakulikuler</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Prestasi</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ppdb.html">PPDB</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Header End -->

    <!-- PPDB Carausel Start -->
    <section
      id="carouselExample"
      class="carousel slide"
      data-bs-ride="carousel"
    >
      <div class="carousel-inner">
        <!-- Slide 1 -->
        <div class="carousel-item active">
          <div class="carousel-overlay">
            <img
              src="img/potbar-smpi-nw-majuwet.jpg"
              class="d-block w-100"
              alt="Gambar 1"
            />
            <div class="dark-overlay"></div>
            <div class="carousel-caption">
              <h2 class="fw-bold animate-fade">
                Selamat Datang di SMP Islam NW Majuwet
              </h2>
              <p class="animate-fade">
                Sekolah yang Unggul dalam Prestasi dan Akhlak
              </p>
            </div>
          </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item">
          <div class="carousel-overlay">
            <img
              src="img/poto-depan-sekolah-smp.jpg"
              class="d-block w-100"
              alt="Gambar 2"
            />
            <div class="dark-overlay"></div>
            <div class="carousel-caption">
              <h2 class="fw-bold animate-slide">Pendaftaran Siswa Baru</h2>
              <p class="animate-slide">
                Daftar Sekarang untuk Masa Depan yang Cerah
              </p>
              <a href="login.html" class="btn btn-green animate-fade">
                <i class="bi bi-person"></i> DAFTAR
              </a>
            </div>
          </div>
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item">
          <div class="carousel-overlay">
            <img
              src="img/poto-belakang-sekolah-smp.jpg"
              class="d-block w-100"
              alt="Gambar 3"
            />
            <div class="dark-overlay"></div>
            <div class="carousel-caption">
              <h2 class="fw-bold animate-zoom">
                Mendidik Generasi Berprestasi
              </h2>
              <p class="animate-zoom">
                SMP Islam Sa'adatuddarain NW Majuwet - Pilihan Terbaik untuk
                Masa Depan
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#carouselExample"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#carouselExample"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>

      <!-- Indicators -->
      <div class="carousel-indicators">
        <button
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide-to="0"
          class="active"
          aria-current="true"
          aria-label="Slide 1"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide-to="1"
          aria-label="Slide 2"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide-to="2"
          aria-label="Slide 3"
        ></button>
      </div>
    </section>
    <!-- PPDB Carausel End -->

    <!-- PPDB Selamat Datang Di PPDB Online Start -->
    <section class="ppdb-section text-center py-5">
      <div class="container my-4">
        
        <!-- Logo -->
        <div class="mb-4">
          <img
            src="img/logo SMP.png"
            alt="Logo Sekolah"
            class="ppdb-logo animate-logo"
          />
        </div>

        <!-- Judul -->
        <h1 class="fw-bold mb-3">
          Selamat Datang di PPDB Online <br />
          <span id="animated-text" class="school-name"></span>
        </h1>

        <!-- Tombol Masuk -->
        <div class="mb-4">
          <a
            href="login.html"
            class="btn btn-green d-inline-flex align-items-center shadow-hover"
          >
            <i class="bi bi-box-arrow-in-right me-2"></i> Masuk
          </a>
        </div>

        <!-- Informasi Penting -->
<!-- Informasi Penting -->
<div class="info-section">
  <marquee class="text-success fw-bold fs-5" id="infoMarquee">[Informasi Penting]</marquee>
  <marquee class="fs-6" id="registrationMarquee">
    Pendaftaran Siswa/i Baru akan dimulai dari Tanggal <span class="fw-bold">12-Februari 2025</span> s/d <span class="fw-bold">30-Juni 2025</span>
  </marquee>
</div>
      </div>
    </section>
    <!-- PPDB Selamat Datang Di PPDB Online End -->

    <!-- PPDB Brosur Start -->

    <section class=" brosur">
      <div class="card-header p-0">
        <img src="img/default-ppdb.jpg" alt="PPDB Brosur" class="img-fluid rounded-top" id="brosurImage">
      </div>
    </section>

    <!-- PPDB Brosur End -->

    <!-- Alur Pendaftaran Start -->

    <section class="py-5 alur-pendaftaran">
      <div class="container">
        <h2 class="text-center fw-bold">Alur Pendaftaran Siswa/i Baru</h2>
        <hr class="mx-auto divider" />
        <div class="row justify-content-center text-center mt-4 gap-3" id="alurContainer">
          <div class="col-4 col-lg-2">
            <button
              class="btn btn-light w-100 mb-2 p-0 shadow-hover"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#step1"
              aria-expanded="false"
              aria-controls="step1"
            >
              <img
                src="photo-alur/tablet-login-concept-illustration_114360-7863.png"
                alt="Step 1"
                class="img-fluid rounded-circle img-hover"
              />
            </button>
            <div class="collapse" id="step1">
              <div class="card card-body border-0">
                Langkah pertama adalah mengisi formulir pendaftaran secara
                online.
              </div>
            </div>
          </div>
          <div class="col-4 col-lg-2">
            <button
              class="btn btn-light w-100 mb-2 p-0 shadow-hover"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#step2"
              aria-expanded="false"
              aria-controls="step2"
            >
              <img
                src="photo-alur/forms-concept-illustration_114360-4797.png"
                alt="Step 2"
                class="img-fluid rounded-circle img-hover"
              />
            </button>
            <div class="collapse" id="step2">
              <div class="card card-body border-0">
                Kirim berkas persyaratan ke panitia PPDB.
              </div>
            </div>
          </div>
          <div class="col-4 col-lg-2">
            <button
              class="btn btn-light w-100 mb-2 p-0 shadow-hover"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#step3"
              aria-expanded="false"
              aria-controls="step3"
            >
              <img
                src="photo-alur/completed-concept-illustration_114360-3891 (1).png"
                alt="Step 3"
                class="img-fluid rounded-circle img-hover"
              />
            </button>
            <div class="collapse" id="step3">
              <div class="card card-body border-0">
                Panitia akan melakukan verifikasi berkas.
              </div>
            </div>
          </div>
          <div class="col-4 col-lg-2">
            <button
              class="btn btn-light w-100 mb-2 p-0 shadow-hover"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#step4"
              aria-expanded="false"
              aria-controls="step4"
            >
              <img
                src="photo-alur/push-notifications-concept-illustration_114360-4730.png"
                alt="Step 4"
                class="img-fluid rounded-circle img-hover"
              />
            </button>
            <div class="collapse" id="step4">
              <div class="card card-body border-0">
                Ikuti tes seleksi yang sudah dijadwalkan.
              </div>
            </div>
          </div>
          <div class="col-4 col-lg-2">
            <button
              class="btn btn-light w-100 mb-2 p-0 shadow-hover"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#step5"
              aria-expanded="false"
              aria-controls="step5"
            >
              <img
                src="photo-alur/completed-concept-illustration_114360-3891 (1).png"
                alt="Step 5"
                class="img-fluid rounded-circle img-hover"
              />
            </button>
            <div class="collapse" id="step5">
              <div class="card card-body border-0">
                Cek pengumuman hasil seleksi di website resmi sekolah.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Alur Pendaftaran End -->

    <!-- Kontak Kami PPDB Online Start -->

    <section id="kontak-kami" class="py-5">
      <div class="container text-center">
        <h2 class="fw-bold mb-4">Kontak Kami</h2>
        <p class="mb-3">
          PPDB ONLINE © SMP ISLAM SA’ADATUDDARAIN NW MAJUWET <br />
          Jln.Kud.Tiga Serangkai Majuwet Desa Bintang Rinjani <br />
          Kec.Suralaga Kab.Lombok Timur Prov.NTB
        </p>
        <div class="map-container mb-4">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3944.832087562659!2d116.51998077382025!3d-8.612114487489311!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dcc496689b27cd7%3A0x955b906a85c54b8d!2sSMP%20Islam%20Sa&#39;adatuddarain%20NW%20Majuwet!5e0!3m2!1sid!2sid!4v1736651272738!5m2!1sid!2sid"
            width="250"
            height="250"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
        <p>
          <i class="bi bi-telephone-fill text-white"></i> 08385534934
          (M.Khuzairi Rozak S.Pd)
          <br />
          <i class="bi bi-telephone-fill text-white"></i> 087867543212 (Imran
          Khamzah)
          <br />
          <i class="bi bi-envelope-fill text-white"></i>
          smpisdmwmajuwet@gmail.com
        </p>
        <hr />
        <p class="mt-4 text-copy">
          Copy Right 2025 | Developer Redi Elwaji Aspan
        </p>
      </div>
    </section>

    <!-- Kontak Kami PPDB Online End -->

    <!-- PPDB End -->
       <!-- JavaScript untuk memuat dan menampilkan data PPDB Carousel -->
  <script>
    async function loadPPDBCarousel() {
      try {
        const response = await fetch('http://127.0.0.1:3000/api/ppdbcarousel');
        if (!response.ok) {
          throw new Error('Gagal mengambil data PPDB Carousel');
        }
        const slides = await response.json();
        
        const carouselInner = document.querySelector('#carouselExample .carousel-inner');
        const carouselIndicators = document.querySelector('#carouselExample .carousel-indicators');

        // Kosongkan kontainer jika sudah ada data sebelumnya
        carouselInner.innerHTML = "";
        if(carouselIndicators) carouselIndicators.innerHTML = "";
        
        if (slides.length === 0) {
          carouselInner.innerHTML = '<div class="carousel-item active"><p class="text-center">Tidak ada data carousel.</p></div>';
          return;
        }

        // Jika ada field order, kita dapat mengurutkan slide berdasarkan order (ascending)
        slides.sort((a, b) => a.order - b.order);

        slides.forEach((slide, index) => {
          // Tentukan kelas aktif untuk slide pertama
          const activeClass = index === 0 ? " active" : "";
          // Buat markup slide
          const slideHTML = `
            <div class="carousel-item${activeClass}">
              <div class="carousel-overlay">
                <img src="${slide.imageUrl}" class="d-block w-100" alt="Gambar ${index + 1}">
                <div class="dark-overlay"></div>
                <div class="carousel-caption">
                  <h2 class="fw-bold">${slide.captionTitle}</h2>
                  <p>${slide.captionDescription}</p>
                  ${slide.linkUrl ? `<a href="${slide.linkUrl}" class="btn-green" target="_blank"><i class="bi bi-box-arrow-in-right"></i> DAFTAR</a>` : ""}
                </div>
              </div>
            </div>
          `;
          carouselInner.innerHTML += slideHTML;

          // Jika ingin menampilkan indikator slide
          if (carouselIndicators) {
            const indicator = document.createElement('button');
            indicator.type = 'button';
            indicator.setAttribute('data-bs-target', '#carouselExample');
            indicator.setAttribute('data-bs-slide-to', index);
            if (index === 0) {
              indicator.classList.add('active');
              indicator.setAttribute('aria-current', 'true');
            }
            indicator.setAttribute('aria-label', `Slide ${index + 1}`);
            carouselIndicators.appendChild(indicator);
          }
        });
      } catch (error) {
        console.error("Error loading PPDB Carousel:", error);
        alert("Terjadi kesalahan saat memuat data PPDB Carousel.");
      }
    }

    // Panggil fungsi loadPPDBCarousel saat halaman selesai dimuat
    document.addEventListener("DOMContentLoaded", loadPPDBCarousel);
  </script>


  <!-- JavaScript untuk memuat data preview -->
  <script>
    // Fungsi untuk memuat PPDB Brosur
    async function loadPPDBBrosur() {
      try {
        const response = await fetch('http://127.0.0.1:3000/api/ppdbbrosur');
        if (!response.ok) throw new Error('Gagal mengambil data PPDB Brosur');
        const jsonData = await response.json();
        const data = Array.isArray(jsonData) ? jsonData[0] : jsonData;
        if (data) {
          document.getElementById('brosurImage').src = data.imageUrl || "img/default-ppdb.jpg";
        }
      } catch (error) {
        console.error("Error loading PPDB Brosur:", error);
      }
    }

    // Fungsi untuk memuat Alur Pendaftaran dan mencetaknya dengan forEach
    async function loadAlurPendaftaran() {
      try {
        const response = await fetch('http://127.0.0.1:3000/api/alurpendaftaran');
        if (!response.ok) throw new Error('Gagal mengambil data alur pendaftaran');
        const steps = await response.json();
        const container = document.getElementById('alurContainer');
        container.innerHTML = "";
        if (steps.length === 0) {
          container.innerHTML = '<p class="text-center">Tidak ada data alur pendaftaran.</p>';
          return;
        }
        // Urutkan berdasarkan stepNumber (ascending)
        steps.sort((a, b) => a.stepNumber - b.stepNumber);
        steps.forEach(step => {
          // Buat elemen kolom untuk tiap langkah
          const colDiv = document.createElement('div');
          colDiv.className = "col-4 col-lg-2";
          colDiv.innerHTML = `
            <button class="btn btn-light w-100 mb-2 p-0 shadow-hover" type="button" data-bs-toggle="collapse" data-bs-target="#step${step.stepNumber}" aria-expanded="false" aria-controls="step${step.stepNumber}">
              <img src="${step.imageUrl}" alt="Step ${step.stepNumber}" class="img-fluid rounded-circle img-hover">
            </button>
            <div class="collapse" id="step${step.stepNumber}">
              <div class="card card-body border-0">
                ${step.description}
              </div>
            </div>
          `;
          container.appendChild(colDiv);
        });
      } catch (error) {
        console.error("Error loading Alur Pendaftaran:", error);
        alert("Terjadi kesalahan saat memuat data alur pendaftaran.");
      }
    }

        // Contoh fungsi load (jika API tersedia, gunakan fetch API)
        async function loadPPDBInfo() {
      try {
        const response = await fetch('http://127.0.0.1:3000/api/ppdbinfo');
        if (!response.ok) throw new Error('Gagal mengambil data PPDB Info');
        const jsonData = await response.json();
        const data = Array.isArray(jsonData) ? jsonData[0] : jsonData;
        if (data) {
          document.getElementById('infoMarquee').innerText = data.infoText || "[Informasi Penting]";
          const startDate = data.registrationStart ? new Date(data.registrationStart).toLocaleDateString() : "-";
          const endDate = data.registrationEnd ? new Date(data.registrationEnd).toLocaleDateString() : "-";
          document.getElementById('registrationMarquee').innerHTML =
            `Pendaftaran Siswa/i Baru akan dimulai dari Tanggal <span class="fw-bold">${startDate}</span> s/d <span class="fw-bold">${endDate}</span>`;
        }
      } catch (error) {
        console.error("Error loading PPDB Info:", error);
      }
    }


    // Panggil semua fungsi load saat DOM selesai dimuat
    document.addEventListener("DOMContentLoaded", function() {
      loadPPDBInfo();
      loadPPDBBrosur();
      loadAlurPendaftaran();
    });
  </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>

    <script src="js/ppdb.js"></script>
  </body>
</html>
